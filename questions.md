Why does deferring close in a function close the function after execution does all deferring have to go in the main block